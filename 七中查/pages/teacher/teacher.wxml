<view class="container">
  <!-- ã€æŸ¥è¯¢é¡µæ ¸å¿ƒå†…å®¹ã€‘ -->
  <view class="query-content" wx:if="{{currentTab === 0}}">
    <!-- æœç´¢æ¡† -->
    <view class="search-box">
      <input 
        class="search-input" 
        placeholder="è¾“å…¥å­¦ç”Ÿå§“å/å­¦å·æœç´¢" 
        value="{{searchKey}}"
        bindinput="onSearchInput"
        confirm-type="search"
        bindconfirm="searchStudent"
      />
      <button class="search-btn" bindtap="searchStudent">æœç´¢</button>
    </view>

    <!-- å­¦ç”Ÿæœç´¢ç»“æœ -->
    <view class="student-list" wx:if="{{searchResult.length > 0}}">
      <view class="list-title">æœç´¢ç»“æœ</view>
      <view class="student-item" wx:for="{{searchResult}}" wx:key="id" bindtap="showStudentScore" data-id="{{item.id}}">
        <text>{{item.name}}</text>
        <text class="student-no">å­¦å·ï¼š{{item.no}}</text>
      </view>
    </view>

    <!-- 8ä¸ªç§‘ç›®æˆç»©ç»Ÿè®¡ï¼ˆæ— æœç´¢æ—¶å±•ç¤ºï¼‰ -->
    <view class="score-container" wx:if="{{!searchKey || searchResult.length === 0}}">
      <view class="container-title">ç­çº§æˆç»©ç»Ÿè®¡</view>
      <view class="score-table">
        <view class="table-header">
          <view class="table-col">ç§‘ç›®</view>
          <view class="table-col">ç­çº§å¹³å‡åˆ†</view>
          <view class="table-col">ç­çº§æœ€é«˜åˆ†</view>
        </view>
        <!-- 8ä¸ªç§‘ç›® -->
        <view class="table-row" wx:for="{{subjectList}}" wx:key="index">
          <view class="table-col">{{item.name}}</view>
          <view class="table-col">{{item.avgScore}}</view>
          <view class="table-col">{{item.maxScore}}</view>
        </view>
      </view>

      <!-- æˆç»©æŠ˜çº¿å›¾ -->
      <view class="chart-box">
        <view class="chart-title">ç­çº§æˆç»©è¶‹åŠ¿</view>
        <canvas canvas-id="scoreChart" width="700" height="400"></canvas>
      </view>
    </view>
  </view>

  <!-- ã€ç®¡ç†é¡µå†…å®¹ã€‘ -->
  <view class="manage-content" wx:if="{{currentTab === 1}}">
    <view class="btn-group">
      <button class="func-btn" bindtap="goToAddStudent">æ·»åŠ å­¦ç”Ÿ</button>
      <button class="func-btn" bindtap="goToAddScore">æ·»åŠ æˆç»©</button>
    </view>

    <!-- å­¦ç”Ÿåˆ—è¡¨ -->
    <view class="list-title">å­¦ç”Ÿåˆ—è¡¨</view>
    <view class="student-list">
      <view class="list-header">
        <view class="list-col">å§“å</view>
        <view class="list-col">èº«ä»½è¯å·</view>
        <view class="list-col">æ“ä½œ</view>
      </view>
      <view class="list-item" wx:for="{{studentList}}" wx:key="id">
        <view class="list-col">{{item.name}}</view>
        <view class="list-col">{{item.idCard}}</view>
        <view class="list-col">
          <button size="mini" bindtap="goToEditStudent" data-id="{{item.id}}">ä¿®æ”¹</button>
          <button size="mini" bindtap="goToEditScore" data-id="{{item.id}}" style="margin-left:5px;">æ”¹æˆç»©</button>
        </view>
      </view>
    </view>
  </view>
  <!-- åº•éƒ¨è‡ªå®šä¹‰tabBarï¼ˆæ•™å¸ˆ/ç®¡ç†å‘˜é€šç”¨ï¼‰ -->
<view class="tab-bar">
  <view class="tab-item {{activeTab === 'query' ? 'active' : ''}}" bindtap="goToQuery">
    <text class="icon">ğŸ”</text>
    <text class="text">æŸ¥è¯¢</text>
  </view>
  <view class="tab-item {{activeTab === 'manage' ? 'active' : ''}}" bindtap="goToManage">
    <text class="icon">ğŸ“‹</text>
    <text class="text">ç®¡ç†</text>
  </view>
  <view class="tab-item {{activeTab === 'mine' ? 'active' : ''}}" bindtap="goToMine">
    <text class="icon">ğŸ‘¤</text>
    <text class="text">æˆ‘çš„</text>
  </view>
</view>
</view>